## data_next：统一数据模拟与播放架构（实验中）

`data_next` 目录用于承载新的统一架构，将当前 `data_factory` 的批量生成能力和 `mock_server` 的有状态、周期执行能力融合到一套核心引擎中。

### 目标

- **统一执行模型**：全部采用“有状态 + 周期执行”的方式，一致的算法逻辑。
- **多种运行模式**：
  - 实时运行：作为 PLC/OPC UA mock server，周期输出数据。
  - 快速批量：不等待或时间加速，跑完指定周期后导出完整序列。
  - 播放模式：从已有数据（CSV 等）按周期播放，供被测软件在线消费。
- **可扩展的节点类型**：支持表达式节点（原 `data_factory`）、物理模型节点、控制算法节点等。

### 目录结构（初版草案）

- `core/`
  - `clock.py`：统一时钟，支持实时、快速、无等待三种模式。
  - `variable.py`：变量状态与环形缓冲区（用于实现滞后/历史）。
  - `expression.py`：表达式执行模块（支持方法调用、属性访问、历史数据访问等）。
  - `engine.py`：统一执行引擎接口和基础实现。
- `config/`
  - 将来承载统一配置模型（arguments 配置、PLC 组态等）。
- `utils/`
  - `logger.py`：统一日志模块（基于 `mock_server` 的实现）。
- `doc/`
  - 需求文档、设计文档、用户手册、交互记录等。

### 说明

- 当前版本仅是骨架和设计草稿，用于逐步迁移与重构，不影响现有 `data_factory` 和 `mock_server` 的运行。
- 所有入口函数将通过 **函数参数** 接收配置与依赖，不使用命令行参数解析。


